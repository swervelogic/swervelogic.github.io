!function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function r(){!e&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;e=!0;var i=new this;e=!1;for(var a in n)i[a]="function"==typeof n[a]&&"function"==typeof o[a]&&t.test(n[a])?function(e,t){return function(){var n=this._super;this._super=o[e];var r=t.apply(this,arguments);return this._super=n,r}}(a,n[a]):n[a];return r.prototype=i,r.prototype.constructor=r,r.extend=arguments.callee,r}}();var AccountDock=function(){var e=$({}),t={},n={host:"static.accountdock.com",live:"1",assets:{js:[]},admin:"0",version:"1",source:"external",key:"ad_acco_12345",customer:"cus_12345",tab:"transactions",name:!1,email:!1,container:"modal"};!function(){var e=function(e){if(e.origin==="https://"+n.host&&"{"===e.data[0]){var r=JSON.parse(e.data);if("message.app.opened"===r.action){var o=t[r.handler];if(o){var i=r.extra;i.handler=o,AccountDock.trigger("internal.app.opened",i)}}else if("message.app.close"===r.action){var o=t[r.handler];if(o){var i=r.extra;i.handler=o,AccountDock.trigger("internal.app.close",i)}}else if("message.app.resize"===r.action){var o=t[r.handler];if(o&&"modal"!==o.options.container&&"window"!==o.options.container){var i=r.extra;i.handler=o,$(o.iFrame.getElement()).css("height",i.height)}}}};window.addEventListener?addEventListener("message",e,!1):attachEvent("onmessage",e)}();return e.configure=function(e){n=$.extend(!0,{},n,e||{});var r=$({}),o=Math.floor(1e6*Math.random())+1,i="ad-h"+o;return r.id=i,t[i]=r,r.ad=!0,r.open=function(e){if(e&&e.host)return void alert("host must be set in AccountDock.configure call");if("boolean"!=typeof this.ad)return void alert("<context> of handler.open call must be the <handler> object");if(e=$.extend(!0,{},n,e||{}),this.options=e,"ad_acco_12345"===this.options.key)alert("Please change your AccountDock key from the default");else if("cus_12345"===this.options.customer)alert("Please change the Stripe customer id from the default");else if(""===this.options.customer)alert("No Stripe customer id was passed");else{var t="https://"+this.options.host+"/app?key="+this.options.key+"&customer="+this.options.customer+"&handler="+this.id;if("window"===e.container){var r=940,o=565;this.reference=window.open(t,"AccountDock","scrollbars=no,width="+r+",height="+o),this.reference.focus()}else if("modal"===e.container){t+="&container=modal";var i=new AccountDock.IFrame;i.setIFrame(t,$("body").first()[0],!1),this.iFrame=i,this.reference=i.getElement().contentWindow}else{t+="&container=inline";var i=new AccountDock.IFrame;i.setIFrame(t,$(e.container)[0],!0),this.iFrame=i,this.reference=i.getElement().contentWindow}}},r.close=function(){var e={action:"message.app.close"};this.reference.postMessage(JSON.stringify(e),"https://"+this.options.host)},r},e.getHandler=function(e){return t[e]},e.getHandlers=function(){var e=[];for(var n in t)e.push(t[n]);return e},e.on("internal.app.opened",function(e,t){var n={action:"message.app.storeParams",params:t.handler.options};t.handler.reference.postMessage(JSON.stringify(n),"https://"+t.handler.options.host),AccountDock.trigger("app.opened",t),t.handler.trigger("app.opened",t)}),e.on("internal.app.close",function(e,t){"window"===t.handler.options.container?(t.handler.reference.close(),AccountDock.trigger("app.closed",t),t.handler.trigger("app.closed",t)):(t.handler.iFrame.remove(),AccountDock.trigger("app.closed",t),t.handler.trigger("app.closed",t))}),e}();!function(){AccountDock.IFrame=Class.extend({_element:null,init:function(){},_draw:function(e){var t=document.createElement("iframe");t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),t.setAttribute("style",this._getStylesString(e)),this._element=t},_getStyles:function(e){var t={"z-index":"9999",display:"block",border:"0px none transparent","overflow-x":"hidden","overflow-y":"auto",visibility:"visible",margin:"0px",padding:"0px","-webkit-tap-highlight-color":"transparent",position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.00392157);"};return e&&(t.position="static",t.height="565px",t["max-width"]="940px"),t},_getStylesString:function(e){var t=this._getStyles(e),n="";for(var r in t)n+=r+": "+t[r]+";";return n},append:function(e){e.appendChild(this._element)},getElement:function(){return this._element},remove:function(){this._element.parentNode.removeChild(this._element)},setIFrame:function(e,t,n){this._element&&this.remove(),this._draw(n),this.append(t),this._element.setAttribute("src",e)}})}();